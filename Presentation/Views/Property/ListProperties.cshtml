@model IEnumerable<Properties>
@{
    ViewData["Title"] = "ListProperties";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Properties</h1>
@if (Model != null)
{
<p>
    <button class="btn btn-sm btn-success addmodal" data-toggle="modal" data-target=".bd-example-modal-lg"><i class="fa fa-plus-circle fa-1x" alt="Add"></i>&nbsp;Create New</button>
    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
            </div>
        </div>
    </div>
</p>
<div class="new_address_css">
     @if (Model==null || !Model.Any())
     {
            <div>No properties Found</div>
     }
     else
     {
         foreach (var item in Model)
         {
                <div class="card propetry">
                    <div class="card-header propery_head">
                        <ul class="opertion_menu">
                            <li class="opertion_menu_item"><a  asp-action="DeleteProperty" asp-route-id="@item.Id" asp-controller="Property"><i class="fa fa-trash-alt fa-1x" aria-hidden="true"></i></a></li>
                            &nbsp;<li class="opertion_menu_item"><a  asp-action="PropertyEditView" asp-route-id="@item.Id" asp-controller="Property"><i class="fa fa-pencil-alt fa-1x" aria-hidden="true"></i></a></li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">@item.PropertyName</h5>
                        <p class="card-text">
                            <address>
                                <strong>@item.PropertyType</strong><br>
                                @item.HouseNumber @item.Street<br>
                                @item.Locality, @item.City<br>
                                @item.PinCode @item.Country<br>
                                @item.StreetLine2<br>
                            </address>

                        </p>

                    </div>

                </div>
         }
     }
  
</div>
}
<div class="spinner">
    <i class="fa fa-spinner fa-3x fa-spin" aria-hidden="true"></i>
</div>

<script>
    $('.addmodal').click(function () {
        var url = '@Url.Action("action")';
                url = url.replace("action", 'AddPropertyView');
                $('.modal-content').html("");
                $('.fa-spin').show();
                RESTCALL(url, {}, "GET", "", true, function (res) {
                    $('.modal-content').html(res);
                    $('.fa-spin').hide();
                })
    })

</script>
<style>
    .new_address_css {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        margin-right: 10px;
        padding-left: 0px;
        padding-right:5px;
    }

        .new_address_css .propetry {
            flex: 1 1 auto;
            border: 1px blue solid;
            text-align: center;
             margin-right: 10px;
           
        }
</style>
@if (TempData.ContainsKey("Error") || TempData.ContainsKey("Success"))
{
    var key = TempData.ContainsKey("Error") ? "Error" : TempData.ContainsKey("Success") ? "Success" : "Info";

    <script>
        alertify.alert('@key', '<p>@TempData[key]</p>', function () { });
    </script>
}